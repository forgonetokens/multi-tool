<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>multi-tool — Small tools for developers</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0e0e10;
    --surface: #18181b;
    --surface2: #222226;
    --border: #2e2e33;
    --text: #e4e4e7;
    --text-muted: #8b8b94;
    --accent: #a78bfa;
    --accent-dim: #7c5cbf;
    --green: #4ade80;
    --red: #f87171;
    --yellow: #fbbf24;
    --radius: 8px;
  }

  body {
    font-family: 'SF Mono', 'Cascadia Code', 'Fira Code', 'JetBrains Mono', monospace;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  a { color: var(--accent); text-decoration: none; }
  a:hover { text-decoration: underline; }

  .container { max-width: 720px; margin: 0 auto; padding: 0 24px; }

  /* ── Site Hero ── */
  .site-hero {
    padding: 80px 0 24px;
    text-align: center;
  }
  .site-hero h1 {
    font-size: 40px;
    font-weight: 700;
    letter-spacing: -1px;
    margin-bottom: 12px;
  }
  .site-hero h1 span { color: var(--accent); }
  .site-hero p {
    color: var(--text-muted);
    font-size: 15px;
    max-width: 480px;
    margin: 0 auto;
  }
  .site-divider {
    border: none;
    border-top: 1px solid var(--border);
    margin: 48px 0;
  }

  /* ── Tool Hero ── */
  .tool-hero {
    margin-bottom: 40px;
  }
  .tool-hero-header {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 24px;
  }
  .tool-hero-header img {
    width: 40px;
    height: 40px;
    border-radius: 8px;
  }
  .tool-hero-header h2 {
    font-size: 28px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }
  .tool-hero-badge {
    display: inline-block;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--accent);
    border: 1px solid var(--accent-dim);
    padding: 3px 10px;
    border-radius: 999px;
    white-space: nowrap;
  }
  .tool-story {
    font-size: 15px;
    color: var(--text-muted);
    line-height: 1.8;
  }
  .tool-story p { margin-bottom: 16px; }
  .tool-story .punchline {
    color: var(--text);
    font-weight: 600;
    font-size: 16px;
  }

  /* ── Screenshot ── */
  .screenshot {
    margin-bottom: 40px;
  }
  .screenshot img {
    width: 100%;
    border-radius: var(--radius);
    border: 1px solid var(--border);
  }

  /* ── Features ── */
  .features { margin-bottom: 56px; }
  .feature-item {
    padding: 24px 0;
    border-bottom: 1px solid var(--border);
  }
  .feature-item:last-child { border-bottom: none; }
  .feature-item h3 {
    font-size: 16px;
    margin-bottom: 8px;
    color: var(--text);
  }
  .feature-item p {
    font-size: 14px;
    color: var(--text-muted);
    line-height: 1.7;
  }
  .feature-item .kbd {
    display: inline-block;
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 1px 6px;
    font-size: 12px;
    color: var(--text);
  }

  /* ── Specs ── */
  .specs {
    display: flex;
    flex-wrap: wrap;
    gap: 8px 16px;
    margin-bottom: 56px;
    padding: 20px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
  }
  .specs li {
    list-style: none;
    font-size: 13px;
    color: var(--text-muted);
    display: flex;
    align-items: center;
    gap: 6px;
    flex-basis: calc(50% - 8px);
  }
  .specs li::before {
    content: '';
    display: inline-block;
    width: 6px;
    height: 6px;
    background: var(--accent);
    border-radius: 50%;
    flex-shrink: 0;
  }
  @media (max-width: 560px) {
    .specs li { flex-basis: 100%; }
  }

  /* ── Sections ── */
  section { margin-bottom: 56px; }
  .section-title {
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--text-muted);
    margin-bottom: 20px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border);
  }

  /* ── Unlock Paths ── */
  .unlock-intro {
    font-size: 14px;
    color: var(--text-muted);
    margin-bottom: 20px;
  }
  .unlock-grid {
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    gap: 16px;
    align-items: center;
  }
  .unlock-or {
    font-size: 13px;
    text-transform: uppercase;
    letter-spacing: 1.5px;
    color: var(--text-muted);
  }
  @media (max-width: 560px) {
    .unlock-grid { grid-template-columns: 1fr; }
    .unlock-or { text-align: center; }
  }
  .unlock-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 24px;
  }
  .unlock-card h3 {
    font-size: 16px;
    margin-bottom: 8px;
  }
  .unlock-card p {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 16px;
  }

  /* ── Buttons ── */
  .btn {
    display: inline-block;
    padding: 10px 20px;
    border-radius: var(--radius);
    border: none;
    font-family: inherit;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: opacity 0.15s;
  }
  .btn:hover { opacity: 0.85; }
  .btn-primary { background: var(--accent); color: #0e0e10; }
  .btn-outline {
    background: transparent;
    color: var(--accent);
    border: 1px solid var(--accent-dim);
  }
  .btn-green { background: var(--green); color: #0e0e10; }
  .btn:disabled { opacity: 0.4; cursor: not-allowed; }

  /* ── Mastermind ── */
  .mastermind-area {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 24px;
    margin-top: 16px;
  }
  .hidden { display: none; }

  .guess-input-row {
    display: flex;
    gap: 8px;
    margin-bottom: 16px;
    align-items: center;
  }
  .guess-input-row input {
    flex: 1;
    background: var(--bg);
    border: 1px solid var(--border);
    color: var(--text);
    font-family: inherit;
    font-size: 20px;
    letter-spacing: 8px;
    padding: 10px 16px;
    border-radius: var(--radius);
    text-align: center;
    max-width: 200px;
  }
  .guess-input-row input:focus {
    outline: none;
    border-color: var(--accent);
  }

  .guess-history {
    max-height: 280px;
    overflow-y: auto;
  }
  .guess-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 6px 0;
    font-size: 14px;
    border-bottom: 1px solid var(--border);
  }
  .guess-row:last-child { border-bottom: none; }
  .guess-code {
    font-size: 18px;
    letter-spacing: 6px;
    min-width: 90px;
  }
  .guess-result { color: var(--text-muted); }
  .guess-result .correct { color: var(--green); font-weight: 700; }
  .guess-result .misplaced { color: var(--yellow); font-weight: 700; }
  .guess-num { color: var(--text-muted); min-width: 24px; text-align: right; }

  .mm-status {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 12px;
  }

  .win-banner {
    text-align: center;
    padding: 20px;
    color: var(--green);
    font-weight: 700;
    font-size: 16px;
  }

  /* ── Download ── */
  .download-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 32px 24px;
    text-align: center;
  }
  .download-section.locked {
    opacity: 0.4;
    pointer-events: none;
    user-select: none;
  }
  .download-section h3 { margin-bottom: 8px; }
  .download-section p {
    font-size: 13px;
    color: var(--text-muted);
    margin-bottom: 16px;
  }
  .lock-overlay {
    font-size: 14px;
    color: var(--text-muted);
    padding: 16px;
  }

  /* ── License ── */
  .license-toggle {
    background: none;
    border: none;
    color: var(--accent);
    cursor: pointer;
    font-family: inherit;
    font-size: 13px;
    margin-top: 16px;
    padding: 4px 0;
  }
  .license-toggle:hover { text-decoration: underline; }
  .license-text {
    display: none;
    text-align: left;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    margin-top: 12px;
    font-size: 12px;
    color: var(--text-muted);
    line-height: 1.7;
    max-height: 240px;
    overflow-y: auto;
    white-space: pre-wrap;
  }
  .license-text.open { display: block; }

  /* ── Coming Soon ── */
  .tools-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }
  @media (max-width: 560px) {
    .tools-grid { grid-template-columns: 1fr; }
  }
  .tool-card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 24px 20px;
    text-align: center;
  }
  .tool-card .icon {
    font-size: 28px;
    margin-bottom: 12px;
    display: block;
  }
  .tool-card h4 { font-size: 14px; margin-bottom: 6px; }
  .tool-card p { font-size: 12px; color: var(--text-muted); margin-bottom: 12px; }
  .tool-card .badge {
    display: inline-block;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--yellow);
    border: 1px solid var(--yellow);
    padding: 2px 10px;
    border-radius: 999px;
    opacity: 0.7;
  }

  /* ── Guide ── */
  .guide { margin-bottom: 56px; }
  .guide h3 {
    font-size: 16px;
    color: var(--text);
    margin: 32px 0 12px;
  }
  .guide h3:first-of-type { margin-top: 0; }
  .guide p {
    font-size: 14px;
    color: var(--text-muted);
    line-height: 1.7;
    margin-bottom: 12px;
  }
  .guide ol, .guide ul {
    padding-left: 20px;
    margin-bottom: 16px;
  }
  .guide li {
    font-size: 14px;
    color: var(--text-muted);
    line-height: 1.8;
  }
  .guide li strong { color: var(--text); }
  .guide .note {
    font-size: 13px;
    color: var(--text-muted);
    border-left: 2px solid var(--accent-dim);
    padding: 8px 16px;
    margin: 16px 0;
    background: var(--surface);
    border-radius: 0 var(--radius) var(--radius) 0;
  }
  .guide code {
    background: var(--surface2);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 1px 6px;
    font-size: 12px;
    color: var(--text);
  }
  .guide pre {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 16px;
    margin: 12px 0 16px;
    font-size: 13px;
    color: var(--text);
    overflow-x: auto;
  }
  .guide pre code {
    background: none;
    border: none;
    padding: 0;
    font-size: 13px;
  }
  .shortcut-table {
    width: 100%;
    border-collapse: collapse;
    margin: 12px 0 16px;
    font-size: 13px;
  }
  .shortcut-table th,
  .shortcut-table td {
    text-align: left;
    padding: 8px 12px;
    border-bottom: 1px solid var(--border);
  }
  .shortcut-table th {
    color: var(--text-muted);
    font-weight: 600;
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }
  .shortcut-table td:first-child { color: var(--text); white-space: nowrap; }
  .shortcut-table td:last-child { color: var(--text-muted); }

  /* ── Footer ── */
  footer {
    padding: 32px 0;
    text-align: center;
    font-size: 12px;
    color: var(--text-muted);
    border-top: 1px solid var(--border);
    margin-top: 24px;
  }
</style>
</head>
<body>

<div class="container">

  <!-- Site Hero -->
  <div class="site-hero">
    <h1><span>multi-tool</span></h1>
    <p>Small, focused tools for developers. Built to solve one thing well, distributed here.</p>
  </div>

  <hr class="site-divider">

  <!-- CMD Palette -->
  <div class="tool-hero">
    <div class="tool-hero-header">
      <img src="icon.png" alt="CMD Palette icon" />
      <h2>CMD PALETTE</h2>
      <span class="tool-hero-badge">macOS menu bar app</span>
    </div>
    <div class="tool-story">
      <p>I kept copy-pasting the same terminal commands. Git incantations, dev server starts, that one process kill command I google every single time. So I built a menu bar app that just... has them.</p>
      <p>Then I added my projects. Now I click a folder and I'm running a dev server with localhost open. No cd-ing around. No remembering port numbers.</p>
      <p class="punchline">This is that app.</p>
    </div>
  </div>

  <div class="screenshot">
    <img src="screenshots/cmd-palette.png" alt="CMD Palette showing project list and terminal" />
  </div>

  <div class="features">
    <div class="section-title">What it does</div>

    <div class="feature-item">
      <h3>Your projects, one click away.</h3>
      <p>Point CMD Palette at your repos folder and every project appears instantly. Open a terminal, launch the dev server, or jump to localhost — all from your menu bar.</p>
    </div>

    <div class="feature-item">
      <h3>Every command you keep forgetting.</h3>
      <p>Git commands, process management, dev server shortcuts — searchable and organized. Click to copy. Stop googling "git undo last commit" for the hundredth time.</p>
    </div>

    <div class="feature-item">
      <h3>Keyboard-first.</h3>
      <p><span class="kbd">Cmd+Shift+&lt;</span> opens the palette from anywhere. Arrow keys navigate, left/right picks an action, Enter executes. Mouse optional.</p>
    </div>

    <div class="feature-item">
      <h3>One-click dev environments.</h3>
      <p>Drop a <span class="kbd">.cmdpalette.json</span> in any project to define your dev command and localhost URL. Hit "Dev" — server starts, browser opens, you're coding.</p>
    </div>

    <div class="feature-item">
      <h3>Lightweight and native.</h3>
      <p>Built with Tauri. Lives in your menu bar. ~20MB memory. No Electron bloat, no browser tabs, no subscriptions.</p>
    </div>
  </div>

  <!-- Specs -->
  <ul class="specs">
    <li>Menu bar app for macOS</li>
    <li>Global hotkey access</li>
    <li>Project launcher with dev server detection</li>
    <li>Auto-opens localhost in browser</li>
    <li>Searchable command reference</li>
    <li>Keyboard navigable</li>
    <li>Per-project .cmdpalette.json config</li>
    <li>Built with Tauri + Svelte</li>
  </ul>

  <!-- Unlock Paths -->
  <section>
    <div class="section-title">Get cmd-palette</div>
    <p class="unlock-intro">No sign-up, no paywall. Just a little challenge — or a little generosity.</p>
    <div class="unlock-grid">
      <div class="unlock-card">
        <h3>Crack the code</h3>
        <p>Play a round of Mastermind. Guess the 4-digit code and the download unlocks. Takes a few minutes if you're sharp.</p>
        <button class="btn btn-primary" id="start-puzzle-btn" onclick="togglePuzzle()">Start Puzzle</button>
      </div>
      <div class="unlock-or">or</div>
      <div class="unlock-card">
        <h3>Leave a tip</h3>
        <p>Skip the puzzle — drop $3 and download right away. That's it. No subscription, no account.</p>
        <a class="btn btn-outline" href="https://buy.stripe.com/7sYdR90w58cb75l72r3Nm00" target="_blank" rel="noopener">Tip $3</a>
      </div>
    </div>

    <!-- Mastermind Game -->
    <div class="mastermind-area hidden" id="mastermind">
      <div class="mm-status" id="mm-status">Guess a 4-digit code (digits 0-9, no repeats). You have unlimited attempts.</div>
      <div class="guess-input-row">
        <input type="text" id="guess-input" maxlength="4" placeholder="1234" autocomplete="off" />
        <button class="btn btn-primary" id="guess-btn" onclick="submitGuess()">Guess</button>
      </div>
      <div id="mm-error" style="color: var(--red); font-size: 13px; margin-bottom: 8px; min-height: 20px;"></div>
      <div class="guess-history" id="guess-history"></div>
      <div class="win-banner hidden" id="win-banner">
        You cracked it! Download unlocked below.
        <div style="margin-top: 12px;">
          <a class="btn btn-outline" href="https://buy.stripe.com/7sYdR90w58cb75l72r3Nm00" target="_blank" rel="noopener" style="font-size: 13px;">Tip $3 anyway</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Download -->
  <section>
    <div class="section-title">Download</div>
    <div class="download-section locked" id="download-section">
      <div class="lock-overlay" id="lock-overlay">Solve the puzzle or leave a tip to unlock.</div>
      <h3 id="dl-heading" style="display:none;">cmd-palette</h3>
      <p id="dl-desc" style="display:none;">macOS · Universal binary · Requires macOS 13+</p>
      <a class="btn btn-green" id="dl-btn" style="display:none;" href="CMD%20Palette_0.1.0_aarch64.dmg" download>Download CMD Palette (.dmg)</a>
      <button class="license-toggle" id="license-btn" style="display:none;" onclick="toggleLicense()">View License</button>
      <div class="license-text" id="license-text">MIT License

Copyright (c) 2025

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</div>
    </div>
  </section>

  <!-- Getting Started -->
  <section class="guide">
    <div class="section-title">Getting Started</div>

    <h3>Install</h3>
    <ol>
      <li>Open the DMG file</li>
      <li>Drag CMD Palette to your Applications folder</li>
      <li>Launch it from Applications — you'll see a small icon appear in your menu bar</li>
      <li><strong>First launch:</strong> macOS will block it because it's unsigned. Go to <strong>System Settings &gt; Privacy &amp; Security</strong>, scroll down, and click <strong>Open Anyway</strong></li>
    </ol>

    <h3>Set Up Your Projects</h3>
    <ol>
      <li>Click the CMD Palette icon in your menu bar to open the palette</li>
      <li>You'll see a <strong>Set Projects Folder</strong> button at the top — click it</li>
      <li>A folder picker will open — navigate to the folder where you keep your coding projects (e.g. <code>~/repos</code>)</li>
      <li>CMD Palette will scan that folder and list every subdirectory as a project</li>
    </ol>
    <div class="note">This setting is saved and persists across restarts. You can change it anytime by clicking the gear icon on the Projects header.</div>

    <h3>Launch a Project</h3>
    <p>Each project in the list has up to three actions:</p>
    <ul>
      <li><strong>Terminal</strong> — Opens a new Terminal.app window at the project directory</li>
      <li><strong>Dev</strong> — Starts the dev server (detected automatically, or configured via <code>.cmdpalette.json</code>)</li>
      <li><strong>Browser</strong> — Opens the project's localhost URL in your default browser</li>
    </ul>

    <p>Click any action directly, or use keyboard navigation:</p>
    <ol>
      <li>Press <code>Cmd+Shift+&lt;</code> to open the palette from anywhere</li>
      <li><code>Arrow Down/Up</code> to highlight a project</li>
      <li><code>Arrow Left/Right</code> to switch between Terminal, Dev, and Browser</li>
      <li>Press <code>Enter</code> to execute</li>
    </ol>

    <p>If a project has a <code>.cmdpalette.json</code> file in its root, CMD Palette will use it for the dev command and URL:</p>
    <pre><code>{
  "dev": "npm run dev",
  "url": "http://localhost:3000"
}</code></pre>
    <p>Without a config file, CMD Palette auto-detects the dev command from your project files (<code>package.json</code>, <code>Cargo.toml</code>, etc.). Static HTML projects with an <code>index.html</code> get a one-click browser open.</p>

    <h3>Copy Commands</h3>
    <p>CMD Palette includes a searchable library of common dev commands (git, npm, process management, etc.).</p>
    <ol>
      <li>Click a category to expand it, or just start typing in the search bar to filter</li>
      <li>Click any command to copy it to your clipboard</li>
      <li>Paste it into your terminal</li>
    </ol>
    <p>A green checkmark confirms the copy. Search works across command names, descriptions, and the actual command text.</p>

    <h3>Keyboard Shortcuts</h3>
    <table class="shortcut-table">
      <thead>
        <tr><th>Key</th><th>Action</th></tr>
      </thead>
      <tbody>
        <tr><td><code>Cmd+Shift+&lt;</code></td><td>Open/close palette from anywhere</td></tr>
        <tr><td><code>Arrow Down/Up</code></td><td>Navigate items</td></tr>
        <tr><td><code>Arrow Left/Right</code></td><td>Switch project action (Terminal / Dev / Browser)</td></tr>
        <tr><td><code>Enter</code></td><td>Execute selected item</td></tr>
        <tr><td><code>Escape</code></td><td>Clear search</td></tr>
        <tr><td><code>Type anything</code></td><td>Filter commands and projects</td></tr>
      </tbody>
    </table>
  </section>

  <!-- Coming Soon -->
  <section>
    <div class="section-title">More tools</div>
    <div class="tools-grid">
      <div class="tool-card"><span class="badge">Coming Soon</span></div>
      <div class="tool-card"><span class="badge">Coming Soon</span></div>
      <div class="tool-card"><span class="badge">Coming Soon</span></div>
    </div>
  </section>

  <!-- About -->
  <section>
    <div class="section-title">About</div>
    <div class="story">
      <p>I'm a self-described "vibe engineer" — one step beyond vibe coder. The projects I build have real, layered complexity, but I still write zero code by hand. I copy-paste from the internet, wire things together with AI, and ship tools that actually work.</p>
      <p style="margin-top: 12px;">If that sounds like you, no judgment. I'm living proof you can build genuinely useful software without formal coding experience. Having a tool that keeps your commands organized and your projects one click away makes all the difference. That's why I built this.</p>
    </div>
  </section>

</div>

<footer>
  <div class="container">&copy; 2026 devlines</div>
</footer>

<script>
  // ── Mastermind Logic ──
  let secretCode = generateCode();
  let guesses = [];
  let solved = false;

  function generateCode() {
    const digits = [0,1,2,3,4,5,6,7,8,9];
    for (let i = digits.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [digits[i], digits[j]] = [digits[j], digits[i]];
    }
    return digits.slice(0, 4).map(String);
  }

  function togglePuzzle() {
    const el = document.getElementById('mastermind');
    const btn = document.getElementById('start-puzzle-btn');
    if (el.classList.contains('hidden')) {
      el.classList.remove('hidden');
      btn.textContent = 'Hide Puzzle';
      document.getElementById('guess-input').focus();
    } else {
      el.classList.add('hidden');
      btn.textContent = 'Start Puzzle';
    }
  }

  function submitGuess() {
    if (solved) return;
    const input = document.getElementById('guess-input');
    const errEl = document.getElementById('mm-error');
    const raw = input.value.trim();
    errEl.textContent = '';

    if (!/^\d{4}$/.test(raw)) {
      errEl.textContent = 'Enter exactly 4 digits.';
      return;
    }

    const digits = raw.split('');
    if (new Set(digits).size !== 4) {
      errEl.textContent = 'Digits must not repeat.';
      return;
    }

    let correctPos = 0;
    let correctDigit = 0;
    for (let i = 0; i < 4; i++) {
      if (digits[i] === secretCode[i]) {
        correctPos++;
      } else if (secretCode.includes(digits[i])) {
        correctDigit++;
      }
    }

    guesses.push({ code: raw, correctPos, correctDigit });
    renderGuesses();
    input.value = '';
    input.focus();

    if (correctPos === 4) {
      solved = true;
      document.getElementById('guess-btn').disabled = true;
      document.getElementById('guess-input').disabled = true;
      document.getElementById('win-banner').classList.remove('hidden');
      unlockDownload();
    }
  }

  function renderGuesses() {
    const el = document.getElementById('guess-history');
    el.innerHTML = guesses.map((g, i) =>
      `<div class="guess-row">
        <span class="guess-num">${i + 1}</span>
        <span class="guess-code">${g.code}</span>
        <span class="guess-result"><span class="correct">${g.correctPos} exact</span> · <span class="misplaced">${g.correctDigit} misplaced</span></span>
      </div>`
    ).reverse().join('');
  }

  // Enter key submits guess
  document.getElementById('guess-input').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') submitGuess();
  });

  // ── Check for paid redirect ──
  if (new URLSearchParams(window.location.search).has('paid')) {
    unlockDownload();
  }

  // ── Unlock ──
  function unlockDownload() {
    const section = document.getElementById('download-section');
    section.classList.remove('locked');
    document.getElementById('lock-overlay').style.display = 'none';
    document.getElementById('dl-heading').style.display = '';
    document.getElementById('dl-desc').style.display = '';
    document.getElementById('dl-btn').style.display = '';
    document.getElementById('license-btn').style.display = '';
  }

  // ── License ──
  function toggleLicense() {
    document.getElementById('license-text').classList.toggle('open');
  }
</script>

</body>
</html>
